## Chapter 7 Acceptance Testing

### Discussions

우리는 제품 개발 업무에 (전부는 아니지만) 단위 테스트를 진행하고 릴리즈 전에 QA도 진행합니다.
하지만 인수 테스트는 생소한 개념인데, 요구사항에 대한 검증 테스트라고 봐도 무방할 것으로 보입니다.

인수 테스트는 단위 테스트와 QA와 어떤 차이점이 있는 것일까?
사실 QA가 인수 테스트를 포함한다고 생각할 수도 있는데 책의 내용상 그렇지는 않습니다.
단위 테스트는 인수 테스트와 다르다 라는 부제도 있기 때문에 단위 테스트 역시 인수 테스트라고 볼 수 없습니다.
인수 테스트는 언제 어떻게 하는게 좋을지 각자의 생각을 논의해 봤으면 좋겠습니다.

의견)
저는 책에 있는 대로 기획, QA, 개발자 들이 모여 이번 분기에 만들 기능이 이렇고, 테스트를 이렇게 할 것이다라고 합의 한 목록을 가지고 개발자가 기능을 구현하는게 좋은 방향이라고 보고 있습니다.

이하 책 내용 정리

---

### COMMUNICATING REQUIREMENTS

과거 로버트가 밥에게 원하는 기능을 구현해 주면서 꺠달은 일화
톰은 시키기만 하고 애플리케이션 작동 방법에 대해 배우지 않았고,
로버트는 고객이 원하는 것을 어떤식으로 깨닫게 되는지에 대한 교훈을 얻음

#### PREMATURE PRECISION (시기상조의 정밀도)

사업부는 프로젝트를 승인하기 전에 일이 어떻게 진행될지 정확히 알고 싶어 함
개발자들은 프로젝트를 추정하기 전에 어떤 제품을 만들어야 할지 정확히 알고 싶어 함.
양쪽이 원하는 정밀도는 불가능

##### The Uncertainty Principle (불확실성의 원칙)

처음에 생각했던 것과 실제 제품이 시스템에서 돌아가는 걸 보면 새로운 정보를 얻게 되고, 시스템을 보는 시각에 영향을 미침
요구사항이 점점 구체적이 되면서 최종 구현된 시스템과 초기 요구사항의 차이는 더 벌어짐

##### Estimation Anxiety

개발자는 시스템 구현에 대한 추정을 하지만 항상 편차가 생김.
또 요구사항은 변경되므로 초기 정밀도는 고려할 가치가 없다.

#### LATE AMBIGUITY

정밀도를 늦추다 보면 때늦은 모호함(late ambihuity)으로 어어짐
백업에 대한 일화
샘은 매일 백업을 진행해서 몇 개월, 몇 년치의 로그를 기록하는 것이라고 지시하지만
폴라는 매일 백업은 진행하지만 같은 파일에 로그를 기록하는 것으로 이해하고 실행
이런 모호함을 제거하기 위한 방법은... 인수테스트

### ACCEPTANCE TESTS

인수 테스트의 정의: 요구사항이 언제 완료되는지를 정의하기 위해 이해당사자들과 프로그래머들이 힘을 모아 작성하는 테스트

#### THE DEFINITION OF "DONE"

프로 개발자에게 완료에 대한 정의는 단 하나 뿐이다.
모든 코드 작성, 모든 테스트 통과, QA 전문가와 이해당사자들이 이를 인수했다는 뜻.

#### COMMUNICATION

인수테스트의 목적은 소통, 명확성 및 정밀성.
개발자, 이해당사자 및 테스터 모두 동의함으로써 시스템 행동을 위한 계획을 이해한다.

#### AUTOMATION

수작업 테스트에는 비용이 많이 들고 사람이 하기 때문에 경제적 타당성이 없다.
그러므로 프로 개발자라면 인수테스트 자동화를 할 수 있게 만들어야 한다.

#### EXTRA WORK

인수테스트를 만드는 일은 추가 작업이라고 생각할 수 있지만, 수동 테스트 보다는 낫다.
많은 시간과 비용에 대한 절약으로 생각해야 한다.

#### WHO WRITES ACCEPTANCE TESTS, AND WHEN?

이해당사자는 테스트의 세부내역 수준을 들여다 보지 않고 시간도 없기 때문에
QA 또는 개발자들이 하는 경우가 있다.

인수 테스트는 '늦은 정밀성'의 원칙에 따라 기능 구현 며칠 전에 가능한 늦게 작성한다.
애자일 스프린트라면 다음 반복주기에서 구현할 기능을 선정한 후에 작성한다.

#### THE DEVELOPER'S ROLE

인수 테스트가 준비되면 기능 구현을 시작한다.
시스템에 인수 테스트를 연결한 다음 테스트를 통과시키는 것은 개발자의 몫이다.

#### TEST NEGOTIATION AND PASSIVE AGGRESSION

테스트도 사람이 만들다 보니 잘못된 가정을 했거나 틀린 테스트를 작성할 경우가 있다.
테스트를 작성하는 사람들에게 더 나은 테스트를 만들도록 협상하는 것은 프로 개발자의 일이다.
잘못된 테스트를 따라가는 수동적 공격은 좋지 않다.

#### ACCEPTANCE TESTS AND UNIT TESTS

인수 테스트는 단위 테스트가 아니다.
인수 테스트는 사업부가 작성하고, 시스템이 어떻게 운영되어야 하는지를 구체적으로 표시한 공식 문서이다.

테스트가 두 번 일어나고 같은 테스트를 한다고 생각할 수 있어도 불필요한 일은 아니다.
단위 테스트는 메소드 단위로 호출해서 시스템 내부로 파고들지만
인수 테스트는 API나 UI 수준으로 시스템 호출을 통해 확인한다.

테스트의 진정한 목적은 사양의 명세다.

#### GUI'S AND OTHER COMPLICATIONS

GUI에 대한 인수 테스트 작성은 어렵지만, API인 것처럼 GUI를 만들도록 시스템을 설계한다.
이상하게 보이지만, 이는 정말 좋은 설계다.

##### Testing through the Right Interface

GUI 테스트 대신 실제 API를 통해서 기본 시스템의 기능을 불러오는 테스트를 작성한다.
설계 전문가들은 수십 년 동안 업무 규칙과 GUI를 분리하라고 말해왔다.
GUI의 API를 통과하기 위한 업무 규칙 테스트를 만들자.

#### CONTINUOUS INTEGRATION

소스가 변경되서 commit 이 진행되면 CI가 빌드를 시작하고, 모든 단위 테스트와 인수 테스트를 지속적으로 실행한다.

##### Stop the Presses 

테스트가 실패하면 출시를 멈추고 테스트를 다시 통과 시키는데 집중해야 한다.